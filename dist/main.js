(()=>{"use strict";let e=!0;const t=()=>{const e=new Array(100).fill(!1);let t=[];return{board:e,myShips:t,placeShips:function(i){let l=t.length+1;t.push(l),i.forEach((t=>e[t]=l))},receiveAttack:function(t){let i;return 0==e[t]?e[t]="missed":"HIT!"!==e[t]&&"missed"!==e[t]&&!1!==e[t]?e[t]="HIT!":i="error",i},AllShipsSunk:function(){return e.every((e=>"missed"==e||"HIT!"==e||0==e))}}},i=(e,t,i)=>{const l=new Array(t).fill(!1);return{id:e,long:t,fields:i,oneShip:l,shipHit:function(e){let t=i.indexOf(e);l[t]=!0},isSunk:function(){return l.every((e=>!0===e))}}};let l=(()=>{let t=[];return{playerChoice:function(){e=!1},computerChoice:function i(){let l;return 0==e&&(l=Math.floor(100*Math.random()),1==t.some((e=>e==l))?i():(t.push(l),e=!0)),l},computerMoves:t}})(),s=t(),o=[],n=i(1,4,[1,2,3,4]);o.push(n);let r=i(2,3,[21,22,23]);o.push(r),s.placeShips(n.fields),s.placeShips(r.fields);let c=t(),a=[],d=i(1,4,[11,12,13,14]);function u(){for(let e=0;e<c.myShips.length;e++)a[e].id,c.myShips[e],1==a[e].isSunk()&&console.log("The ship has been sunk")}function h(){1==s.AllShipsSunk()?console.log("koniec komp wygral"):1==c.AllShipsSunk()&&console.log("koniec janusz wygral")}a.push(d),c.placeShips(d.fields);let p,f=document.querySelector(".playerBoard"),m=document.querySelector(".computerBoard");function g(){s.receiveAttack(p),f.textContent="";for(let e=0;e<=99;e++){let t=document.createElement("div");f.appendChild(t),t.classList.add("pixel");let i=s.board[e];if("missed"==s.board[e])t.classList.toggle("missed");else if("HIT!"==s.board[e]){t.classList.toggle("hit");for(let t=0;t<o.length;t++)i==o[t].id&&o[t].shipHit(e)}}!function(){console.log(s.board);for(let e=0;e<s.myShips.length;e++)o[e].id,s.myShips[e],1==o[e].isSunk()&&console.log("The ship has been sunk")}(),h()}g(),function(){for(let t=0;t<=99;t++){let i=document.createElement("div");m.appendChild(i),i.classList.add("pixel"),1==e&&i.addEventListener("click",(()=>{if(1==e){let e=c.board[t];if(c.receiveAttack(t),"missed"==c.board[t])i.classList.toggle("missed");else if("HIT!"==c.board[t]){i.classList.toggle("hit");for(let i=0;i<a.length;i++)e==a[i].id&&a[i].shipHit(t)}u(),h(),l.playerChoice(),p=l.computerChoice(),g()}}))}}()})();